<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Visualization · Healpix.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">Healpix.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Introduction</a></li><li><a class="tocitem" href="../resolutions/">Working with resolutions</a></li><li><a class="tocitem" href="../pixelfunc/">Pixel functions</a></li><li><a class="tocitem" href="../query/">Query functions</a></li><li><a class="tocitem" href="../mapfunc/">Map functions</a></li><li><a class="tocitem" href="../alm/">Spherical harmonics</a></li><li class="is-active"><a class="tocitem" href>Visualization</a><ul class="internal"><li class="toplevel"><a class="tocitem" href="#Cartographic-projections"><span>Cartographic projections</span></a></li><li><a class="tocitem" href="#Projection-functions"><span>Projection functions</span></a></li></ul></li><li><a class="tocitem" href="../misc/">Miscellanea</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Visualization</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Visualization</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/ziotom78/Healpix.jl/blob/master/docs/src/visualization.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Visualization-functions"><a class="docs-heading-anchor" href="#Visualization-functions">Visualization functions</a><a id="Visualization-functions-1"></a><a class="docs-heading-anchor-permalink" href="#Visualization-functions" title="Permalink"></a></h1><p>Healpix.jl uses RecipesBase to display maps. You need to import <code>Plots</code> in order to display maps, using the <code>plot</code> functions.  Maps are internally treated as heatmaps, so your backend should support this kind of visualization: at the moment, this is true for GR, PlotLy and PyPlot.</p><pre><code class="language- hljs">using Healpix
using Plots
pyplot()  # hide

nside = 8
m = HealpixMap{Float64, RingOrder}(nside)
m.pixels[:] = 1:length(m.pixels)
plot(m)
savefig(joinpath(&quot;images&quot;, &quot;mollweide.png&quot;)) # hide</code></pre><p><img src="../images/mollweide.png" alt/></p><p>A call to <code>plot</code> can provide two additional arguments:</p><ol><li>A carthographic projection (see below).</li><li>A dictionary containing parameters to be used by the carthographic projection.</li></ol><p>The following example displays the same map in orthographic coordinates:</p><pre><code class="language- hljs">plot(m, orthographic)
savefig(joinpath(&quot;images&quot;, &quot;orthographic.png&quot;)) # hide</code></pre><p><img src="../images/orthographic.png" alt/></p><h1 id="Cartographic-projections"><a class="docs-heading-anchor" href="#Cartographic-projections">Cartographic projections</a><a id="Cartographic-projections-1"></a><a class="docs-heading-anchor-permalink" href="#Cartographic-projections" title="Permalink"></a></h1><p>Plotting is based on <code>project</code>, which takes a map as input and produces a 2-D bitmap containing a representation of the map suitable to be shown using <a href="https://github.com/JuliaPlots/Plots.jl">Plots</a>.</p><p>Although the easiest way to plot a map is to use <code>plot</code>, <code>project</code> might be suitable in those cases where you are just interested in a 2D bitmap. It requires a <em>inverse</em> projection function (mapping the 2D plane to a point on the sphere) and the size of the bitmap, and it returns three values:</p><ul><li><p>A 2-D bitmap containing the color level of each pixel. Unseen pixels (e.g., those falling outside the ellipse in a Mollweide projection) are marked as <code>NaN</code>, as well as unseen pixels;</p></li><li><p>A 2-D bitmap of <code>Bool</code> values, telling which pixels in the map are masked, i.e., they are marked as <code>UNSEEN</code>, <code>NaN</code> or <code>missing</code> in the Healpix map;</p></li><li><p>A <code>Bool</code> flag telling if there is any masked value in the mask (2nd return value, see above). This parameter is returned to optimize calls to <code>plot</code>, but it is obviously redundant.</p></li></ul><p>Consider this example:</p><pre><code class="language-julia hljs">using Healpix

m = HealpixMap{Float64, RingOrder}(1)
# Plot the map on a 20×20 bitmap using an
# equirectangular projection
image, mask, maskflag = project(equiprojinv, m, 20, 20)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">(Float32[0.0 0.0 … 0.0 0.0; 0.0 0.0 … 0.0 0.0; … ; 0.0 0.0 … 0.0 0.0; 0.0 0.0 … 0.0 0.0], Bool[0 0 … 0 0; 0 0 … 0 0; … ; 0 0 … 0 0; 0 0 … 0 0], false)</code></pre><p>A number of parameters can be passed to <code>project</code>, in order to taylor the representation. They must <strong>not</strong> be passed as keyword arguments, because this would clash with the way plot recipes work; instead, you must use a dictionary:</p><pre><code class="language-julia hljs"># Return a 2-D bitmap of 16-bit floating-point values
image, _, _ = project(equiprojinv, m, 20, 20,
                      Dict(:desttype =&gt; Float16))</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">(Float16[0.0 0.0 … 0.0 0.0; 0.0 0.0 … 0.0 0.0; … ; 0.0 0.0 … 0.0 0.0; 0.0 0.0 … 0.0 0.0], Bool[0 0 … 0 0; 0 0 … 0 0; … ; 0 0 … 0 0; 0 0 … 0 0], false)</code></pre><p>The following dictionary keys are available:</p><ul><li><p><code>:desttype</code>: type used for the pixels in the 2-D bitmap returned by <code>project</code>. Default is <code>Float32</code>;</p></li><li><p><code>:unseen</code>: the value marking pixels as unseen, i.e., masked. The default is <code>-1.6375e+30</code>, to preserve compatibility with other Healpix libraries.</p></li><li><p><code>:center</code>: currently this is used only with orthographic projections. It specifies the coordinates of the center of the image (colatitude and longitude, both in radians).</p></li></ul><article class="docstring"><header><a class="docstring-binding" id="Healpix.project" href="#Healpix.project"><code>Healpix.project</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">project(invprojfn, m::HealpixMap{T, O, AA}, bmpwidth, bmpheight; kwargs...)</code></pre><p>Return a 2D bitmap (array) containing a cartographic projection of the map and a 2D bitmap containing a boolean mask. The size of the bitmap is <code>bmpwidth</code>×<code>bmpheight</code> pixels. The function <code>projfn</code> must be a function which accepts as input two parameters <code>x</code> and <code>y</code> (numbers between -1 and 1).</p><p>The following keywords can be used in the call:</p><ul><li><code>center</code>: 2-tuple specifying the location (colatitude, longitude) of the sky point that is to be placed in the middle of the image (in radians)</li><li><code>unseen</code>: by default, Healpix maps use the value -1.6375e+30 to mark unseen pixels. You can specify a different value using this keyword. This should not be used in common applications.</li></ul><p>Return a <code>Array{Union{Missing, Float32}}</code> containing the intensity of each pixel. Pixels falling outside the projection are marked as NaN, and unseen pixels are marked as <code>missing</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ziotom78/Healpix.jl/blob/ad8b46e81976011e49bbf1cf8e0594da612f49ef/src/projections.jl#L23-L43">source</a></section></article><h2 id="Projection-functions"><a class="docs-heading-anchor" href="#Projection-functions">Projection functions</a><a id="Projection-functions-1"></a><a class="docs-heading-anchor-permalink" href="#Projection-functions" title="Permalink"></a></h2><p>Functions <a href="#Healpix.mollweide"><code>mollweide</code></a>, <a href="#Healpix.equirectangular"><code>equirectangular</code></a>, and <a href="#Healpix.orthographic"><code>orthographic</code></a> can be passed as parameters to <code>plot</code>.</p><article class="docstring"><header><a class="docstring-binding" id="Healpix.mollweide" href="#Healpix.mollweide"><code>Healpix.mollweide</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">mollweide(m::HealpixMap{T, O, AA}, projparams = Dict()) where {T &lt;: Number, O, AA}</code></pre><p>High-level wrapper around <code>project</code> for Mollweide projections.</p><p>The following parameters can be set in the <code>projparams</code> dictionary:</p><ul><li><code>width</code>: width of the image, in pixels (default: 720 pixels)</li><li><code>height</code>: height of the image, in pixels; if not specified, it will be assumed to be equal to <code>width</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ziotom78/Healpix.jl/blob/ad8b46e81976011e49bbf1cf8e0594da612f49ef/src/projections.jl#L296-L306">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Healpix.equirectangular" href="#Healpix.equirectangular"><code>Healpix.equirectangular</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">equirectangular(m::HealpixMap{T,O,AA}; kwargs...) where {T &lt;: Number, O, AA}</code></pre><p>High-level wrapper around <code>project</code> for equirectangular projections.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ziotom78/Healpix.jl/blob/ad8b46e81976011e49bbf1cf8e0594da612f49ef/src/projections.jl#L285-L289">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Healpix.orthographic" href="#Healpix.orthographic"><code>Healpix.orthographic</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">orthographic(m::HealpixMap{T,O}, projparams = Dict()) where {T &lt;: Number,O &lt;: Order}</code></pre><p>High-level wrapper around <code>project</code> for orthographic projections.</p><p>The following parameters can be set in the <code>projparams</code> dictionary:</p><ul><li><code>width</code>: width of the image, in pixels (default: 720 pixels)</li><li><code>height</code>: height of the image, in pixels; if not specified, it will be assumed to be equal to <code>width</code></li><li><code>center</code>: position of the pixel in the middle of the left globe (<em>latitude</em> and longitude).</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ziotom78/Healpix.jl/blob/ad8b46e81976011e49bbf1cf8e0594da612f49ef/src/projections.jl#L313-L325">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Healpix.orthographic2" href="#Healpix.orthographic2"><code>Healpix.orthographic2</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">orthographic2(m::HealpixMap{T, O, AA}, projparams = Dict()) where {T &lt;: Number, O, AA}</code></pre><p>High-level wrapper around <code>project</code> for stereo orthographic projections.</p><p>The following parameters can be set in the <code>projparams</code> dictionary:</p><ul><li><code>width</code>: width of the image, in pixels (default: 720 pixels)</li><li><code>height</code>: height of the image, in pixels; if not specified, it will be assumed to be equal to <code>width</code></li><li><code>center</code>: position of the pixel in the middle of the left globe (<em>latitude</em> and longitude). Default is (0, 0).</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ziotom78/Healpix.jl/blob/ad8b46e81976011e49bbf1cf8e0594da612f49ef/src/projections.jl#L335-L347">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Healpix.gnomonic" href="#Healpix.gnomonic"><code>Healpix.gnomonic</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">gnomonic(m::HealpixMap{T, O, AA}, projparams = Dict()) where {T &lt;: Number, O, AA}</code></pre><p>High-level wrapper around <code>project</code> for gnomonic projections.</p><p>The following parameters can be set in the <code>projparams</code> dictionary:</p><ul><li><p><code>width</code>: width of the image, in pixels (default: 720 pixels)</p></li><li><p><code>height</code>: height of the image, in pixels; if not specified, it will be assumed to be equal to <code>width</code></p></li><li><p><code>center</code>: position and orientation of the pixel in the middle. It is a 3-element tuple containing:</p><ol><li>The <em>latitude</em> of the pixel, in radians</li><li>The longitude of the pixel, in radians</li><li>The rotation to be applied to the image, in radians</li></ol></li><li><p><code>fov_rad</code>: size of the image along the x and y axes, in radians (default: 15°)</p></li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">plot(m, gnomonic, Dict(:fov_rad = deg2rad(1.5), :center = (0, 0, deg2rad(45))))</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ziotom78/Healpix.jl/blob/ad8b46e81976011e49bbf1cf8e0594da612f49ef/src/projections.jl#L357-L381">source</a></section></article><p>They are based on <em>inverse</em> projection functions, i.e., functions that take a point in the plane <span>$[-1, 1] \times [-1, 1]$</span> and return a tuple <code>(Bool, Number, Number)</code>, where the first Boolean is <code>true</code> if the point falls within the projection, and the other two numbers are the latitude and longitude in radians.</p><article class="docstring"><header><a class="docstring-binding" id="Healpix.mollweideprojinv" href="#Healpix.mollweideprojinv"><code>Healpix.mollweideprojinv</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">mollweideprojinv(x, y)</code></pre><p>Inverse Mollweide projection. Given a point (x, y) on the plane, with x ∈ [-1, 1], y ∈ [-1, 1], return a 3-tuple of type (Bool, Number, Number). The boolean specifies if (x, y) falls within the map (true) or not (false), the second and third arguments are the latitude and longitude in radians.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ziotom78/Healpix.jl/blob/ad8b46e81976011e49bbf1cf8e0594da612f49ef/src/projections.jl#L148-L156">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Healpix.equiprojinv" href="#Healpix.equiprojinv"><code>Healpix.equiprojinv</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">equiprojinv(x, y)</code></pre><p>Inverse equirectangular projection. Given a point (x, y) on the plane [-1, 1] × [-1, 1], return a tuple (Bool, Number, Number) where the first Boolean is a flag telling if the point falls within the projection (true) or not (false), and the two numbers are the latitude and longitude in radians.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ziotom78/Healpix.jl/blob/ad8b46e81976011e49bbf1cf8e0594da612f49ef/src/projections.jl#L119-L127">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Healpix.orthoinv" href="#Healpix.orthoinv"><code>Healpix.orthoinv</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">orthoinv(x, y, ϕ1, λ0)</code></pre><p>Inverse orthographic projection centered on (ϕ1, λ0). Given a point (x, y) on the plane, with x ∈ [-1, 1], y ∈ [-1, 1], return a 3-tuple of type (Bool, Number, Number). The boolean specifies if (x, y) falls within the map (true) or not (false), the second and third arguments are the latitude and longitude in radians.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ziotom78/Healpix.jl/blob/ad8b46e81976011e49bbf1cf8e0594da612f49ef/src/projections.jl#L176-L184">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Healpix.ortho2inv" href="#Healpix.ortho2inv"><code>Healpix.ortho2inv</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function ortho2inv(x, y, ϕ1, λ0)</code></pre><p>Inverse stereo orthographic projection centered on (ϕ1, λ0). Given a point (x, y) on the plane, with x ∈ [-1, 1], y ∈ [-1, 1], return a 3-tuple of type (Bool, Number, Number). The boolean specifies if (x, y) falls within the map (true) or not (false), the second and third arguments are the latitude and longitude in radians.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ziotom78/Healpix.jl/blob/ad8b46e81976011e49bbf1cf8e0594da612f49ef/src/projections.jl#L218-L226">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Healpix.gnominv" href="#Healpix.gnominv"><code>Healpix.gnominv</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">function gnominv(x, y, ϕ1, λ0, fov_rad)</code></pre><p>Gnomonic projection centered on (ϕ1, λ0), with a field of view equal to <code>fov_rad</code> (in radians).  Given a point (x, y) on the plane, with x ∈ [-1, 1], y ∈ [-1, 1], return a 3-tuple of type (Bool, Number, Number). The boolean specifies if (x, y) falls within the map (true) or not (false), the second and third arguments are the latitude and longitude in radians.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ziotom78/Healpix.jl/blob/ad8b46e81976011e49bbf1cf8e0594da612f49ef/src/projections.jl#L232-L241">source</a></section></article><p>The direct project functions are available too.</p><article class="docstring"><header><a class="docstring-binding" id="Healpix.equiproj" href="#Healpix.equiproj"><code>Healpix.equiproj</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">equiproj(lat, lon)</code></pre><p>Equirectangular projection. Given the latitude <code>lat</code> (in radians) and the longitude (in radians), return a tuple (Bool, Number, Number) where the first Boolean is a flag telling if the point falls within the projection (true) or not (false), and the two numbers are the x and y coordinates of the point on the projection plane (both are in the range [−1, 1]).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ziotom78/Healpix.jl/blob/ad8b46e81976011e49bbf1cf8e0594da612f49ef/src/projections.jl#L101-L109">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Healpix.mollweideproj" href="#Healpix.mollweideproj"><code>Healpix.mollweideproj</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">mollweideproj(lat, lon)</code></pre><p>Mollweide projection. Given the latitude <code>lat</code> (in radians) and the longitude (in radians), return a tuple (Bool, Number, Number) where the first Boolean is a flag telling if the point falls within the projection (true) or not (false), and the two numbers are the x and y coordinates of the point on the projection plane (both are in the range [−1, 1]).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ziotom78/Healpix.jl/blob/ad8b46e81976011e49bbf1cf8e0594da612f49ef/src/projections.jl#L134-L142">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../alm/">« Spherical harmonics</a><a class="docs-footer-nextpage" href="../misc/">Miscellanea »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.23 on <span class="colophon-date" title="Tuesday 6 September 2022 17:10">Tuesday 6 September 2022</span>. Using Julia version 1.6.7.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
