<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Visualization · Healpix.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>Healpix.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../">Introduction</a></li><li><a class="toctext" href="../resolutions/">Working with resolutions</a></li><li><a class="toctext" href="../pixelfunc/">Pixel functions</a></li><li><a class="toctext" href="../mapfunc/">Map functions</a></li><li><a class="toctext" href="../alm/">Spherical harmonics</a></li><li class="current"><a class="toctext" href>Visualization</a><ul class="internal"><li class="toplevel"><a class="toctext" href="#Cartographic-projections-1">Cartographic projections</a></li><li><a class="toctext" href="#Projection-functions-1">Projection functions</a></li></ul></li><li><a class="toctext" href="../misc/">Miscellanea</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href>Visualization</a></li></ul><a class="edit-page" href="https://github.com/ziotom78/Healpix.jl/blob/master/docs/src/visualization.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Visualization</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Visualization-functions-1" href="#Visualization-functions-1">Visualization functions</a></h1><p>Healpix.jl uses RecipesBase to display maps. You need to import <code>Plots</code> in order to display maps, using the <code>plot</code> functions.  Maps are internally treated as heatmaps, so your backend should support this kind of visualization: at the moment, this is true for GR, PlotLy and PyPlot.</p><pre><code class="language-">using Healpix
using Plots
gr()  # Use the GR backend

nside = 8
m = Map{Float64, RingOrder}(nside)
m.pixels[:] = 1:length(m.pixels)
plot(m)
savefig(joinpath(&quot;images&quot;, &quot;mollweide.png&quot;)) # hide</code></pre><p><img src="../images/mollweide.png" alt/></p><p>A call to <code>plot</code> can provide two additional arguments:</p><ol><li>A carthographic projection (see below).</li><li>A dictionary containing parameters to be used by the carthographic projection.</li></ol><p>The following example displays the same map in orthographic coordinates:</p><pre><code class="language-">plot(m, orthographic)
savefig(joinpath(&quot;images&quot;, &quot;orthographic.png&quot;)) # hide</code></pre><p><img src="../images/orthographic.png" alt/></p><h1><a class="nav-anchor" id="Cartographic-projections-1" href="#Cartographic-projections-1">Cartographic projections</a></h1><p>Plotting is based on <code>project</code>, which takes a map as input and produces a 2-D bitmap containing a representation of the map suitable to be shown using <a href="https://github.com/JuliaPlots/Plots.jl">Plots</a>.</p><p>Although the easiest way to plot a map is to use <code>plot</code>, <code>project</code> might be suitable in those cases where you are just interested in a 2D bitmap. It requires a <em>inverse</em> projection function (mapping the 2D plane to a point on the sphere) and the size of the bitmap, and it returns three values:</p><ul><li><p>A 2-D bitmap containing the color level of each pixel. Unseen pixels (e.g., those falling outside the ellipse in a Mollweide projection) are marked as <code>NaN</code>, as well as unseen pixels;</p></li><li><p>A 2-D bitmap of <code>Bool</code> values, telling which pixels in the map are masked, i.e., they are marked as <code>UNSEEN</code>, <code>NaN</code> or <code>missing</code> in the Healpix map;</p></li><li><p>A <code>Bool</code> flag telling if there is any masked value in the mask (2nd return value, see above). This parameter is returned to optimize calls to <code>plot</code>, but it is obviously redundant.</p></li></ul><p>Consider this example:</p><div><pre><code class="language-julia">using Healpix

m = Map{Float64, RingOrder}(1)
# Plot the map on a 20×20 bitmap using an
# equirectangular projection
image, mask, maskflag = project(equiprojinv, m, 20, 20)</code></pre><pre><code class="language-none">(Float32[0.0 0.0 … 0.0 0.0; 0.0 0.0 … 0.0 0.0; … ; 0.0 0.0 … 0.0 0.0; 0.0 0.0 … 0.0 0.0], Bool[false false … false false; false false … false false; … ; false false … false false; false false … false false], false)</code></pre></div><p>A number of parameters can be passed to <code>project</code>, in order to taylor the representation. They must <strong>not</strong> be passed as keyword arguments, because this would clash with the way plot recipes work; instead, you must use a dictionary:</p><div><pre><code class="language-julia"># Return a 2-D bitmap of 16-bit floating-point values
image, _, _ = project(equiprojinv, m, 20, 20,
                      Dict(:desttype =&gt; Float16))</code></pre><pre><code class="language-none">(Float16[0.0 0.0 … 0.0 0.0; 0.0 0.0 … 0.0 0.0; … ; 0.0 0.0 … 0.0 0.0; 0.0 0.0 … 0.0 0.0], Bool[false false … false false; false false … false false; … ; false false … false false; false false … false false], false)</code></pre></div><p>The following dictionary keys are available:</p><ul><li><p><code>:desttype</code>: type used for the pixels in the 2-D bitmap returned by <code>project</code>. Default is <code>Float32</code>;</p></li><li><p><code>:unseen</code>: the value marking pixels as unseen, i.e., masked. The default is <code>-1.6375e+30</code>, to preserve compatibility with other Healpix libraries.</p></li><li><p><code>:center</code>: currently this is used only with orthographic projections. It specifies the coordinates of the center of the image (colatitude and longitude, both in radians).</p></li></ul><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Healpix.project" href="#Healpix.project"><code>Healpix.project</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">project(invprojfn, m::Map{T, O}, bmpwidth, bmpheight; kwargs...) where {T &lt;: Number, O &lt;: Order}</code></pre><p>Return a 2D bitmap (array) containing a cartographic projection of the map and a 2D bitmap containing a boolean mask. The size of the bitmap is <code>bmpwidth</code>×<code>bmpheight</code> pixels. The function <code>projfn</code> must be a function which accepts as input two parameters <code>x</code> and <code>y</code> (numbers between -1 and 1).</p><p>The following keywords can be used in the call:</p><ul><li><code>center</code>: 2-tuple specifying the location (colatitude, longitude) of the sky point that is to be placed in the middle of the image (in radians)</li><li><code>unseen</code>: by default, Healpix maps use the value -1.6375e+30 to mark unseen pixels. You can specify a different value using this keyword. This should not be used in common applications.</li></ul><p>Return a <code>Array{Union{Missing, Float32}}</code> containing the intensity of each pixel. Pixels falling outside the projection are marked as NaN, and unseen pixels are marked as <code>missing</code>.</p></div></div><a class="source-link" target="_blank" href="https://github.com/ziotom78/Healpix.jl/blob/43e90915dba47577de322970bbc14d58b9830ab5/src/projections.jl#L14-L34">source</a></section><h2><a class="nav-anchor" id="Projection-functions-1" href="#Projection-functions-1">Projection functions</a></h2><p>Functions <a href="#Healpix.mollweide"><code>mollweide</code></a>, <a href="#Healpix.equirectangular"><code>equirectangular</code></a>, and <a href="#Healpix.orthographic"><code>orthographic</code></a> can be passed as parameters to <code>plot</code>.</p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Healpix.mollweide" href="#Healpix.mollweide"><code>Healpix.mollweide</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">mollweide(m::Map{T,O}, projparams = Dict()) where {T &lt;: Number,O &lt;: Order}</code></pre><p>High-level wrapper around <code>project</code> for Mollweide projections.</p><p>The following parameters can be set in the <code>projparams</code> dictionary:</p><ul><li><code>width</code>: width of the image, in pixels (default: 720 pixels)</li><li><code>height</code>: height of the image, in pixels; if not specified, it will be assumed to be equal to <code>width</code></li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/ziotom78/Healpix.jl/blob/43e90915dba47577de322970bbc14d58b9830ab5/src/projections.jl#L272-L282">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Healpix.equirectangular" href="#Healpix.equirectangular"><code>Healpix.equirectangular</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">equirectangular(m::Map{T,O}; kwargs...) where {T &lt;: Number, O &lt;: Order}</code></pre><p>High-level wrapper around <code>project</code> for equirectangular projections.</p></div></div><a class="source-link" target="_blank" href="https://github.com/ziotom78/Healpix.jl/blob/43e90915dba47577de322970bbc14d58b9830ab5/src/projections.jl#L261-L265">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Healpix.orthographic" href="#Healpix.orthographic"><code>Healpix.orthographic</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">orthographic(m::Map{T,O}, projparams = Dict()) where {T &lt;: Number,O &lt;: Order}</code></pre><p>High-level wrapper around <code>project</code> for orthographic projections.</p><p>The following parameters can be set in the <code>projparams</code> dictionary:</p><ul><li><code>width</code>: width of the image, in pixels (default: 720 pixels)</li><li><code>height</code>: height of the image, in pixels; if not specified, it will be assumed to be equal to <code>width</code></li><li><code>center</code>: position of the pixel in the middle of the left globe (<em>latitude</em> and longitude).</li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/ziotom78/Healpix.jl/blob/43e90915dba47577de322970bbc14d58b9830ab5/src/projections.jl#L289-L301">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Healpix.orthographic2" href="#Healpix.orthographic2"><code>Healpix.orthographic2</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">orthographic2(m::Map{T,O}, projparams = Dict()) where {T &lt;: Number,O &lt;: Order}</code></pre><p>High-level wrapper around <code>project</code> for stereo orthographic projections.</p><p>The following parameters can be set in the <code>projparams</code> dictionary:</p><ul><li><code>width</code>: width of the image, in pixels (default: 720 pixels)</li><li><code>height</code>: height of the image, in pixels; if not specified, it will be assumed to be equal to <code>width</code></li><li><code>center</code>: position of the pixel in the middle of the left globe (<em>latitude</em> and longitude). Default is (0, 0).</li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/ziotom78/Healpix.jl/blob/43e90915dba47577de322970bbc14d58b9830ab5/src/projections.jl#L311-L323">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Healpix.gnomonic" href="#Healpix.gnomonic"><code>Healpix.gnomonic</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">gnomonic(m::Map{T,O}, projparams = Dict()) where {T &lt;: Number,O &lt;: Order}</code></pre><p>High-level wrapper around <code>project</code> for gnomonic projections.</p><p>The following parameters can be set in the <code>projparams</code> dictionary:</p><ul><li><p><code>width</code>: width of the image, in pixels (default: 720 pixels)</p></li><li><p><code>height</code>: height of the image, in pixels; if not specified, it will be assumed to be equal to <code>width</code></p></li><li><p><code>center</code>: position and orientation of the pixel in the middle. It is a 3-element tuple containing:</p><ol><li>The <em>latitude</em> of the pixel, in radians</li><li>The longitude of the pixel, in radians</li><li>The rotation to be applied to the image, in radians</li></ol></li><li><p><code>fov_rad</code>: size of the image along the x and y axes, in radians (default: 15°)</p></li></ul><p><strong>Example</strong></p><pre><code class="language-julia">plot(m, gnomonic, Dict(:fov_rad = deg2rad(1.5), :center = (0, 0, deg2rad(45))))</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/ziotom78/Healpix.jl/blob/43e90915dba47577de322970bbc14d58b9830ab5/src/projections.jl#L333-L357">source</a></section><p>They are based on <em>inverse</em> projection functions, i.e., functions that take a </p><pre><code class="language-none">mollweideprojinv
equiprojinv
orthoinv
ortho2inv
gnominv</code></pre><footer><hr/><a class="previous" href="../alm/"><span class="direction">Previous</span><span class="title">Spherical harmonics</span></a><a class="next" href="../misc/"><span class="direction">Next</span><span class="title">Miscellanea</span></a></footer></article></body></html>
